{
  "kind": "implementation_plan",
  "version": "1.0",
  "title": "Add online ordering functionality for restaurants",
  "requirements": [
    {
      "id": "REQ-11",
      "summary": "Add shopping cart state management system with add, adjust quantities, and view cart total capabilities",
      "acceptanceCriteria": [
        "Cart state persists across page navigation within the session",
        "Users can increment and decrement item quantities",
        "Cart displays running total of all items",
        "Cart shows item count badge or indicator"
      ],
      "file_operations": [
        {
          "path": "frontend/src/hooks/useCart.ts",
          "operation": "create",
          "description": "Create a custom React hook that manages cart state using React context and session storage, providing functions to add items, update quantities, remove items, calculate totals, and clear the cart"
        },
        {
          "path": "frontend/src/contexts/CartContext.tsx",
          "operation": "create",
          "description": "Create a CartContext provider that wraps the application and provides cart state and operations to all child components via React context"
        },
        {
          "path": "frontend/src/main.tsx",
          "operation": "modify",
          "description": "Wrap the App component with CartContext provider to enable cart state access throughout the application"
        },
        {
          "path": "frontend/src/types/cart.ts",
          "operation": "create",
          "description": "Define TypeScript types for cart items, cart state, and cart operations including CartItem with MenuItem, quantity, and restaurant name"
        }
      ]
    },
    {
      "id": "REQ-12",
      "summary": "Create order menu section on RestaurantDetailPage displaying available items grouped by category with add-to-cart functionality",
      "acceptanceCriteria": [
        "Menu items are displayed below existing restaurant details",
        "Items are grouped by category (appetizers, mains, desserts, etc.)",
        "Each item shows name, description, and price",
        "Add to cart button is present for each item",
        "Visual feedback when item is added to cart"
      ],
      "file_operations": [
        {
          "path": "frontend/src/hooks/useQueries.ts",
          "operation": "modify",
          "description": "Add a useGetOrderMenuItems query hook that fetches menu items for a specific restaurant using the getOrderMenuItems backend method"
        },
        {
          "path": "frontend/src/components/OrderMenu.tsx",
          "operation": "create",
          "description": "Create a component that displays menu items grouped by category, with each item showing name, description, price, and an add-to-cart button with visual feedback on click"
        },
        {
          "path": "frontend/src/components/MenuItemCard.tsx",
          "operation": "create",
          "description": "Create a reusable card component for displaying a single menu item with name, description, price, and add-to-cart button"
        },
        {
          "path": "frontend/src/pages/RestaurantDetailPage.tsx",
          "operation": "modify",
          "description": "Integrate the OrderMenu component below the existing restaurant details section, passing the restaurant name to fetch and display available order items"
        }
      ]
    },
    {
      "id": "REQ-13",
      "summary": "Create cart review page displaying selected items, quantities, prices, and total with options to adjust or remove items",
      "acceptanceCriteria": [
        "Cart is accessible from any page via header or floating button",
        "Shows all items with restaurant name, item name, quantity, and line total",
        "Users can adjust quantities or remove items",
        "Displays subtotal and order total",
        "Empty cart state shows appropriate message"
      ],
      "file_operations": [
        {
          "path": "frontend/src/pages/CartPage.tsx",
          "operation": "create",
          "description": "Create a cart review page that displays all cart items grouped by restaurant, with quantity controls, remove buttons, line totals, and order summary with subtotal and total"
        },
        {
          "path": "frontend/src/components/CartItemRow.tsx",
          "operation": "create",
          "description": "Create a component for displaying a single cart item with restaurant name, item details, quantity controls (increment/decrement), remove button, and line total calculation"
        },
        {
          "path": "frontend/src/components/CartButton.tsx",
          "operation": "create",
          "description": "Create a floating cart button component with item count badge that navigates to the cart page when clicked"
        },
        {
          "path": "frontend/src/components/Layout.tsx",
          "operation": "modify",
          "description": "Add the CartButton component to the header section to make cart accessible from any page"
        },
        {
          "path": "frontend/src/App.tsx",
          "operation": "modify",
          "description": "Add a cart route (/cart) that renders the CartPage component"
        }
      ]
    },
    {
      "id": "REQ-14",
      "summary": "Implement checkout flow collecting delivery address and contact information with order submission",
      "acceptanceCriteria": [
        "Checkout form collects delivery address, phone number, and optional notes",
        "Backend stores orders with timestamp, user identity, restaurant, items, quantities, total, and delivery info",
        "Order is assigned a unique order ID and initial status (pending)",
        "Cart is cleared after successful order submission",
        "User receives confirmation with order ID and summary"
      ],
      "file_operations": [
        {
          "path": "frontend/src/pages/CheckoutPage.tsx",
          "operation": "create",
          "description": "Create a checkout page with a form collecting delivery address, phone number, and optional notes, displaying order summary, and handling order submission with backend placeOrder method. Use the authorization component to ensure user is logged in before checkout."
        },
        {
          "path": "frontend/src/components/CheckoutForm.tsx",
          "operation": "create",
          "description": "Create a form component with input fields for delivery address, phone number, and optional notes with validation"
        },
        {
          "path": "frontend/src/components/OrderSummary.tsx",
          "operation": "create",
          "description": "Create a component displaying the order summary with items, quantities, prices, and total for review before submission"
        },
        {
          "path": "frontend/src/pages/OrderConfirmationPage.tsx",
          "operation": "create",
          "description": "Create an order confirmation page displaying the order ID, summary, and success message after successful order placement"
        },
        {
          "path": "frontend/src/hooks/useQueries.ts",
          "operation": "modify",
          "description": "Add a usePlaceOrder mutation hook that calls the placeOrder backend method and invalidates order history queries on success"
        },
        {
          "path": "frontend/src/App.tsx",
          "operation": "modify",
          "description": "Add checkout route (/checkout) rendering CheckoutPage and order confirmation route (/order-confirmation/:orderId) rendering OrderConfirmationPage"
        },
        {
          "path": "frontend/src/pages/CartPage.tsx",
          "operation": "modify",
          "description": "Add a 'Proceed to Checkout' button that navigates to the checkout page when cart is not empty"
        }
      ]
    },
    {
      "id": "REQ-15",
      "summary": "Create order history page displaying past orders with details, status, and restaurant information",
      "acceptanceCriteria": [
        "Backend method returns all orders for the authenticated user",
        "Orders are displayed in reverse chronological order (newest first)",
        "Each order shows restaurant name, order date, total, and current status",
        "Users can expand order details to see full item list",
        "Navigation link to order history is accessible from header"
      ],
      "file_operations": [
        {
          "path": "frontend/src/pages/OrderHistoryPage.tsx",
          "operation": "create",
          "description": "Create an order history page that displays all user orders in reverse chronological order, showing restaurant name, date, total, and status. Use the authorization component to ensure user is logged in before displaying orders."
        },
        {
          "path": "frontend/src/components/OrderHistoryCard.tsx",
          "operation": "create",
          "description": "Create a card component for displaying a single order with expandable details showing the full item list, restaurant name, timestamp, total, and current status"
        },
        {
          "path": "frontend/src/hooks/useQueries.ts",
          "operation": "modify",
          "description": "Add a useGetOrderHistory query hook that fetches all orders for the authenticated user using the getOrderHistory backend method"
        },
        {
          "path": "frontend/src/components/Layout.tsx",
          "operation": "modify",
          "description": "Add a navigation link to 'Order History' in the header that routes to the order history page"
        },
        {
          "path": "frontend/src/App.tsx",
          "operation": "modify",
          "description": "Add an order history route (/orders) that renders the OrderHistoryPage component"
        }
      ]
    }
  ]
}